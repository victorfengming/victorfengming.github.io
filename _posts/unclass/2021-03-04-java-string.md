---
title: "面试官：String长度有限制吗？是多少？"
tags: base java interview
---





<hr style="max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-style: solid;border-right-width: 0px;border-bottom-width: 0px;border-left-width: 0px;border-color: rgba(0, 0, 0, 0.098);transform-origin: 0px 0px 0px;transform: scale(1, 0.5);box-sizing: border-box !important;word-wrap: break-word !important;">
<h1 style="font-weight: 700;font-size: 1.5em;max-width: 100%;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.33333;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);margin-top: 28px !important;box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(79, 79, 79);box-sizing: border-box !important;word-wrap: break-word !important;">前言</span><br
        style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></h1><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">话说Java中String是有长度限制的，听到这里很多人不禁要问，String还有长度限制？是的有，而且在JVM编译中还有规范，而且有的家人们在面试的时候也遇到了，本人就遇到过面试的时候问这个的，而且在之前开发的中也真实地遇到过这个String长度限制的场景（将某固定文件转码成Base64的形式用字符串存储，在运行时需要的时候在转回来，当时文件比较大），那这个规范限制到底是怎么样的，咱们话不多说先䁖䁖去。</span>
</p>
<h1 style="font-weight: 700;font-size: 1.5em;max-width: 100%;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.33333;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);margin-top: 28px !important;box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(79, 79, 79);box-sizing: border-box !important;word-wrap: break-word !important;">String</span>
</h1>
<p style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">首先要知道String的长度限制我们就需要知道String是怎么存储字符串的，String其实是使用的一个char类型的数组来存储字符串中的字符的。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.1651376146788991" data-type="png" data-w="872"
         data-src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPBFda1CYEsW8hjzNGDV5kDp87X11xFle8ia3C1dx0E9eQrzatFqtM7bA/640?wx_fmt=png"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPBFda1CYEsW8hjzNGDV5kDp87X11xFle8ia3C1dx0E9eQrzatFqtM7bA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 12px;margin-bottom: 16px;max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: initial;border-color: initial;text-align: center;font-size: 12px;line-height: 16px;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">
    存储String的容器原来是它</p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">那么String既然是数组存储那数组会有长度的限制吗？是的有限制，但是是在有先提条件下的，我们看看String中返回length的方法。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.3274974253347065" data-type="jpeg" data-w="971"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPVDiaC46STHdsSAcoEqickGMCOCmWCicZcHF82SSRXJGECU2CO3CxK1RAA/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPVDiaC46STHdsSAcoEqickGMCOCmWCicZcHF82SSRXJGECU2CO3CxK1RAA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 12px;margin-bottom: 16px;max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: initial;border-color: initial;text-align: center;font-size: 12px;line-height: 16px;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">
    String类中的length方法</p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">由此我们看到返回值类型是int类型，Java中定义数组是可以给数组指定长度的，当然不指定的话默认会根据数组元素来指定：</span>
</p>
<pre style="margin-top: 1em;margin-bottom: 1em;padding: 15px;max-width: 100%;letter-spacing: 0.544px;font-family: Monaco;font-size: 16px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(232, 232, 232);line-height: 1.5;color: rgb(34, 34, 34);background: rgb(250, 250, 250);overflow-x: auto;border-radius: 3px;text-align: left;box-shadow: rgba(216, 216, 216, 0.498) 0px 0px 0px 1px inset;box-sizing: border-box !important;word-wrap: break-word !important;"><code
        style="max-width: 100%;font-family: inherit;font-size: 1em;border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;word-wrap: break-word !important;"><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(17, 75, 166);box-sizing: border-box !important;word-wrap: break-word !important;">int</span>[] arr1 = <span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(17, 75, 166);box-sizing: border-box !important;word-wrap: break-word !important;">new</span> <span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(17, 75, 166);box-sizing: border-box !important;word-wrap: break-word !important;">int</span>[<span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(168, 46, 46);box-sizing: border-box !important;word-wrap: break-word !important;">10</span>]; <span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">// 定义一个长度为10的数组</span><br
        style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(17, 75, 166);box-sizing: border-box !important;word-wrap: break-word !important;">int</span>[] arr2 = {<span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(168, 46, 46);box-sizing: border-box !important;word-wrap: break-word !important;">1</span>,<span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(168, 46, 46);box-sizing: border-box !important;word-wrap: break-word !important;">2</span>,<span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(168, 46, 46);box-sizing: border-box !important;word-wrap: break-word !important;">3</span>,<span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(168, 46, 46);box-sizing: border-box !important;word-wrap: break-word !important;">4</span>,<span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(168, 46, 46);box-sizing: border-box !important;word-wrap: break-word !important;">5</span>}; <span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">// 那么此时数组的长度为5</span></code></pre>
<p style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">整数在java中是有限制的，我们通过源码来看看int类型对应的包装类Integer可以看到，其长度最大限制为2^31 -1，那么说明了数组的长度是0~2^31-1，那么计算一下就是（2^31-1 = 2147483647 = 4GB）</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.415625" data-type="jpeg" data-w="1280"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPEnzpWolIdDqgVKNOZaicDQA5dPDENNJ7MLEm7NYOBpbXB8K1A05qmrg/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; background-color: rgb(238, 237, 235); border-width: 0px; border-style: initial; border-color: initial; background-size: 22px; background-position: center center; background-repeat: no-repeat; cursor: zoom-in; display: block; overflow-wrap: break-word !important; width: 677px !important; height: auto !important; visibility: visible !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPEnzpWolIdDqgVKNOZaicDQA5dPDENNJ7MLEm7NYOBpbXB8K1A05qmrg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 12px;margin-bottom: 16px;max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: initial;border-color: initial;text-align: center;font-size: 12px;line-height: 16px;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">
    Integer的取值范围</p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">看到这我们尝试通过编码来验证一下上述观点。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.4203125" data-type="jpeg" data-w="1280"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPKel7DuoEw5ibL5POV8P4y5nKZJA0l86vxY7r9vEJ6ZGmo4BCoBiawpwg/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; background-color: rgb(238, 237, 235); border-width: 0px; border-style: initial; border-color: initial; background-size: 22px; background-position: center center; background-repeat: no-repeat; cursor: zoom-in; display: block; overflow-wrap: break-word !important; width: 677px !important; height: auto !important; visibility: visible !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPKel7DuoEw5ibL5POV8P4y5nKZJA0l86vxY7r9vEJ6ZGmo4BCoBiawpwg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 12px;margin-bottom: 16px;max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: initial;border-color: initial;text-align: center;font-size: 12px;line-height: 16px;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">
    以字面量形式定义字符串</p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">以上是我通过定义字面量的形式构造的10万个字符的字符串，编译之后虚拟机提示报错，说我们的字符串长度过长，不是说好了可以存21亿个吗？为什么才10万个就报错了呢？</span>
</p>
<p style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;"><br
            style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">其实这里涉及到了JVM编译规范的限制了，其实JVM在编译时，如果我们将字符串定义成了字面量的形式，编译时JVM是会将其存放在常量池中，这时候JVM对这个常量池存储String类型做出了限制，接下来我们先看下手册是如何说的。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.5" data-type="jpeg" data-w="1280"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPvXjnhPO4zjdD3guccQGZyQoP5WFgyVY7RAZFOJlQThyySjCTFuwzIQ/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPvXjnhPO4zjdD3guccQGZyQoP5WFgyVY7RAZFOJlQThyySjCTFuwzIQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 12px;margin-bottom: 16px;max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: initial;border-color: initial;text-align: center;font-size: 12px;line-height: 16px;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">
    java虚拟机规范截图</p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">常量池中，每个 cp_info 项的格式必须相同，它们都以一个表示 cp_info 类型的单字节 “tag”项开头。后面 info[]项的内容 由tag 的类型所决定。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="1.0953125" data-type="jpeg" data-w="640"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPgZWuyy6PNv97RQfjTgoV6M9KpDyosXnS4yeB1tRxVZvtJBZeiaicqDeQ/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 640px !important; height: auto !important;"
         _width="640px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPgZWuyy6PNv97RQfjTgoV6M9KpDyosXnS4yeB1tRxVZvtJBZeiaicqDeQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 12px;margin-bottom: 16px;max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: initial;border-color: initial;text-align: center;font-size: 12px;line-height: 16px;color: rgb(153, 153, 153);box-sizing: border-box !important;word-wrap: break-word !important;">
    java虚拟机规范手册常量类型表</p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">我们可以看到 String类型的表示是 CONSTANT_String ，我们来看下CONSTANT_String具体是如何定义的。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.6859375" data-type="jpeg" data-w="1280"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPfPicXNiaHbNTgLmZ9CYCThuu9mzZc0YpS13iceygwolCMIEGuIj2VqqpA/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPfPicXNiaHbNTgLmZ9CYCThuu9mzZc0YpS13iceygwolCMIEGuIj2VqqpA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">这里定义的 u2 string_index 表示的是常量池的有效索引，其类型是CONSTANT_Utf8_info 结构体表示的，这里我们需要注意的是其中定义的length我们看下面这张图。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.25280898876404495" data-type="jpeg" data-w="890"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPEBX17GicpA4xzWx7xGbpspurrOlk0IbD1kBbMd6EKf56mH5ShXBs1sw/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; background-color: rgb(238, 237, 235); border-width: 0px; border-style: initial; border-color: initial; background-size: 22px; background-position: center center; background-repeat: no-repeat; cursor: zoom-in; display: block; overflow-wrap: break-word !important; width: 677px !important; height: auto !important; visibility: visible !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPEBX17GicpA4xzWx7xGbpspurrOlk0IbD1kBbMd6EKf56mH5ShXBs1sw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">在class文件中u2表示的是无符号数占2个字节单位，我们知道1个字节占8位，2个字节就是16位 ，那么2个字节能表示的范围就是2^16- 1 = 65535 。范中class文件格式对u1、u2的定义的解释做了一下摘要：</span>
</p>
<blockquote
        style="padding-top: 0px;padding-left: 16px;border-left-width: 4px;border-left-color: rgb(232, 232, 232);color: rgb(112, 112, 112);font-size: 16px;max-width: 100%;letter-spacing: 0.544px;white-space: normal;border-top: none;border-right: none;border-bottom: none;quotes: none;line-height: 1.5;background: rgb(255, 255, 255);border-radius: 4px;font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;box-sizing: border-box !important;word-wrap: break-word !important;">
    <p style="max-width: 100%;min-height: 1em;border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;word-wrap: break-word !important;">
        <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(85, 86, 102);box-sizing: border-box !important;word-wrap: break-word !important;">这里对java虚拟机规摘要部分<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">1、class文件中文件内容类型解释<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">定义一组私有数据类型来表示 Class 文件的内容，它们包括 u1，u2 和 u4，分别代<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">表了 1、2 和 4 个字节的无符号数。<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">每个 Class 文件都是由 8 字节为单位的字节流组成，所有的 16 位、32 位和 64 位长度的数<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">据将被构造成 2 个、4 个和 8 个 8 字节单位来表示。</span>
    </p>
    <p style="max-width: 100%;min-height: 1em;border-width: 0px;border-style: initial;border-color: initial;height: 0px;box-sizing: border-box !important;word-wrap: break-word !important;">
        <br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p>
    <p style="max-width: 100%;min-height: 1em;border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;word-wrap: break-word !important;">
        <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(85, 86, 102);box-sizing: border-box !important;word-wrap: break-word !important;">2、程序异常处理的有效范围解释<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">start_pc 和 end_pc 两项的值表明了异常处理器在 code[]数组中的有效范围。<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">start_pc 必须是对当前 code[]数组中某一指令的操作码的有效索引，end_pc 要<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">么是对当前 code[]数组中某一指令的操作码的有效索引，要么等于 code_length<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">的值，即当前 code[]数组的长度。start_pc 的值必须比 end_pc 小。<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">当程序计数器在范围[start_pc, end_pc)内时，异常处理器就将生效。即设 x 为<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">异常句柄的有效范围内的值，x 满足：start_pc ≤ x &lt; end_pc。<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">实际上，end_pc 值本身不属于异常处理器的有效范围这点属于 Java 虚拟机历史上<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">的一个设计缺陷：如果 Java 虚拟机中的一个方法的 code 属性的长度刚好是 65535<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">个字节，并且以一个 1 个字节长度的指令结束，那么这条指令将不能被异常处理器<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">所处理。不过编译器可以通过限制任何方法、实例初始化方法或类初始化方法的<br
                style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">code[]数组最大长度为 65534，这样可以间接弥补这个 BUG。</span>
    </p>
    <p style="max-width: 100%;min-height: 1em;border-width: 0px;border-style: initial;border-color: initial;height: 0px;box-sizing: border-box !important;word-wrap: break-word !important;">
        <br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p>
    <p style="max-width: 100%;min-height: 1em;border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;word-wrap: break-word !important;">
        <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(85, 86, 102);box-sizing: border-box !important;word-wrap: break-word !important;">注意：这里对个人认为比较重要的点做了标记，首先第一个加粗说白了就是说数组有效范围就是【0-65565】但是第二个加粗的地方又解释了，因为虚拟机还需要1个字节的指令作为结束，所以其实真正的有效范围是【0-65564】，这里要注意这里的范围仅限编译时期，如果你是运行时拼接的字符串是可以超出这个范围的。</span>
    </p></blockquote><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">接下来我们通过一个小实验来测试一下我们构建一个长度为65534的字符串，看看是否就能编译通过。<br
            style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">首先通过一个for循环构建65534长度的字符串，在控制台打印后，我们通过自己度娘的一个在线字符统计工具计算了一下确实是65534个字符，如下：</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="1" data-type="jpeg" data-w="1196"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXP3jPSSDlQrWK5oIACLbtRkiagEwzspOARBcrtM3HflK4OwZEZE1p00vQ/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXP3jPSSDlQrWK5oIACLbtRkiagEwzspOARBcrtM3HflK4OwZEZE1p00vQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.6703125" data-type="jpeg" data-w="1280"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPkf33DTHcbrBrly5ianq7AVYnsS0EavPfcPMWQDojg2dNsw5ibibBISTxw/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPkf33DTHcbrBrly5ianq7AVYnsS0EavPfcPMWQDojg2dNsw5ibibBISTxw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">然后我们将字符复制后以定义字面量的形式</span><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">赋值</span><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">给字符串，可以看到我们选择这些字符右下角显示的确实是65534，于是乎运行了一波，果然成功了。</span>
</p>
<p style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.5140625" data-type="jpeg" data-w="1280"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXP8lBtEVofH7CjLdic5jul2kTibryIL6Z7vYLz3sHIIVRtOEK6FCLlyGzg/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXP8lBtEVofH7CjLdic5jul2kTibryIL6Z7vYLz3sHIIVRtOEK6FCLlyGzg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p
        style="max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <img data-ratio="0.16986301369863013" data-type="jpeg" data-w="1825"
         data-src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPOlyGJuFMe3J3dInW4EkwQ3Qiap0ulvm8H3Hf1nA5NEN3Swjnb4PXwkg/640?wx_fmt=jpeg"
         style="margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; cursor: zoom-in; display: block; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;"
         _width="677px" class=""
         src="https://mmbiz.qpic.cn/mmbiz_jpg/QCu849YTaIMZHnibTUWwXoNbMPELr4MXPOlyGJuFMe3J3dInW4EkwQ3Qiap0ulvm8H3Hf1nA5NEN3Swjnb4PXwkg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"
         crossorigin="anonymous" alt="图片" data-fail="0"></p><p
        style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">看到这里我们来总结一下：<br
            style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">问：字符串有长度限制吗？是多少？</span>
</p>
<p style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">答：首先字符串的内容是由一个字符</span><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">数组</span><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;char[] 来存储的，由于数组的长度及索引是整数，且String类中返回字符串长度的方法length() 的返回值也是int ，所以通过查看java源码中的类Integer我们可以看到Integer的最大范围是2^31 -1,由于数组是从0开始的，所以数组的最大长度可以</span><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">使</span><span
        style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">【0~2^31-1】通过计算是大概4GB。</span>
</p>
<p style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">但是通过翻阅java虚拟机手册对class文件格式的定义以及常量池中对String类型的结构体定义我们可以知道对于索引定义了u2，就是无符号占2个字节，2个字节可以表示的最大范围是2^16 -1 = 65535。<br
            style="max-width: 100%;display: inline;box-sizing: border-box !important;word-wrap: break-word !important;">其实是65535，但是由于JVM需要1个字节表示结束指令，所以这个范围就为65534了。超出这个范围在编译时期是会报错的，但是运行时拼接或者赋值的话范围是在整形的最大范围。</span>
</p>
<p style="margin-top: 16px;margin-bottom: 16px;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: initial;border-color: initial;color: rgb(34, 34, 34);font-family: &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">
    <span style="max-width: 100%;border-width: 0px;border-style: initial;border-color: initial;color: rgb(77, 77, 77);box-sizing: border-box !important;word-wrap: break-word !important;">解析到这里就告一段落了，如果觉得在下讲得对你有帮助的可以点一波赞或者在看，如果发现有讲的不好的或者有什么遗漏的，欢迎评论区留言相互学习交流。</span>
</p><p data-tool="mdnice编辑器"
       style="margin-top: 1em;margin-bottom: 1em;max-width: 100%;min-height: 1em;font-size: inherit;letter-spacing: 0.544px;white-space: normal;color: rgb(62, 62, 62);font-family: -apple-system, system-ui, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;line-height: 1.6 !important;">
    <span style="max-width: 100%;text-align: justify;color: rgb(255, 76, 0);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;box-sizing: border-box !important;word-wrap: break-word !important;">PS：</span><span
        style="max-width: 100%;text-align: justify;color: rgb(255, 76, 0);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;box-sizing: border-box !important;word-wrap: break-word !important;">如果觉得我的分享不错，欢迎大家随手点赞、在看。</span>
</p>
<pre style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><section
        style="margin-right: 0em;margin-bottom: 10px;margin-left: 0em;max-width: 100%;white-space: normal;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color: rgb(63, 63, 63);font-size: 14px;letter-spacing: 1.5px;text-align: center;line-height: 2em;box-sizing: border-box !important;word-wrap: break-word !important;"><span
        style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong
        style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">END</strong></span></section></pre>
</div>